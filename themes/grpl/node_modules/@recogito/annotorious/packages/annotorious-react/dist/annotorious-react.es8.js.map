{"version":3,"file":"annotorious-react.es8.js","sources":["../../annotorious-core/src/presence/AppearanceProvider.ts"],"sourcesContent":["import type { User } from '../model';\nimport type { Appearance } from './Appearance';\nimport type { PresentUser } from './PresentUser';\nimport { DEFAULT_PALETTE } from './ColorPalette';\n\nexport interface AppearanceProvider {\n\n  addUser(presenceKey: string, user: User): Appearance;\n\n  removeUser(user: PresentUser): void;\n\n}\n\nexport const defaultColorProvider = () => {\n\n  const unassignedColors = [...DEFAULT_PALETTE];\n\n  const assignRandomColor = () => {\n    const rnd = Math.floor(Math.random() * unassignedColors.length);\n    const color = unassignedColors[rnd];\n\n    unassignedColors.splice(rnd, 1);\n\n    return color;\n  }\n\n  const releaseColor = (color: string) =>\n    unassignedColors.push(color);\n\n  return { assignRandomColor, releaseColor };\n\n}\n\nexport const createDefaultAppearenceProvider = () => {\n\n  const colorProvider = defaultColorProvider();\n\n  const addUser = (presenceKey: string, user: User): Appearance => {\n    const color = colorProvider.assignRandomColor();\n\n    return {\n      label: user.name || user.id,\n      avatar: user.avatar,\n      color\n    };\n  }\n\n  const removeUser = (user: PresentUser) =>\n    colorProvider.releaseColor(user.appearance.color);\n\n  return { addUser, removeUser }\n  \n}"],"names":["defaultColorProvider","unassignedColors","DEFAULT_PALETTE","rnd","color"],"mappings":";AAaO,MAAMA,IAAuB,MAAM;AAElC,QAAAC,IAAmB,CAAC,GAAGC,CAAe;AAcrC,SAAA,EAAE,mBAZiB,MAAM;AAC9B,UAAMC,IAAM,KAAK,MAAM,KAAK,WAAWF,EAAiB,MAAM,GACxDG,IAAQH,EAAiBE,CAAG;AAEjB,WAAAF,EAAA,OAAOE,GAAK,CAAC,GAEvBC;AAAA,EAAA,GAMmB,cAHP,CAACA,MACpBH,EAAiB,KAAKG,CAAK;AAI/B;"}