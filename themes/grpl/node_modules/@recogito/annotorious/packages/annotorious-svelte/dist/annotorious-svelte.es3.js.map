{"version":3,"file":"annotorious-svelte.es3.js","sources":["../src/osd/OpenSeadragonAnnotator.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { setContext } from 'svelte';\n  import { SvelteAnnotator, SvelteAnnotatorState, toSvelteStore } from '@annotorious/core';\n  import { createOSDAnnotator, ImageAnnotation } from '@annotorious/openseadragon';\n  import type OpenSeadragon from 'openseadragon';\n\n  /** props **/\n  export let viewer: OpenSeadragon.Viewer;\n  export let opts = {};\n  export let anno: SvelteAnnotator<ImageAnnotation> = undefined;\n\n  $: init(viewer);\n\n  const init = (viewer: OpenSeadragon.Viewer) => {\n    if (viewer) {\n      const annotator = createOSDAnnotator(viewer, opts);\n\n      // Wrap the store for Svelte reactivity\n      const svelteStore = toSvelteStore(annotator.state.store);\n\n      const shim = {\n        ...annotator,\n        state: {\n          ...annotator.state,\n          store: svelteStore\n        } as SvelteAnnotatorState<ImageAnnotation>\n      } as SvelteAnnotator<ImageAnnotation>\n\n      setContext('anno', shim);\n      setContext('viewer', viewer);\n\n      anno = shim;\n    }\n  }\n</script>\n\n{#if viewer}\n  <slot />\n{/if}\n"],"names":["ctx","create_if_block","viewer","$$props","opts","anno","init","annotator","createOSDAnnotator","svelteStore","toSvelteStore","shim","setContext","$$invalidate"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAoCKA,EAAM,CAAA,KAAAC,EAAAD,CAAA;AAAA;;;;;;;;;;MAANA,EAAM,CAAA;;;;;;;;;;;;;;;;;6CA7BE,QAAAE,EAA4B,IAAAC,KAC5B,MAAAC,IAAI,GAAA,IAAAD,GACJ,EAAA,MAAAE,IAAyC,OAAS,IAAAF;AAIvD,QAAAG,IAAQ,CAAAJ,MAA4B;QACpCA,GAAM;AACF,YAAAK,IAAYC,EAAmBN,GAAQE,CAAI,GAG3CK,IAAcC,EAAcH,EAAU,MAAM,KAAK,GAEjDI,IAAI;AAAA,WACLJ;AAAA,QACH,YACKA,EAAU,OACb,OAAOE,EAAA;AAAA;AAIX,MAAAG,EAAW,QAAQD,CAAI,GACvBC,EAAW,UAAUV,CAAM,GAE3BW,EAAA,GAAAR,IAAOM,CAAI;AAAA;;;;;;SApBZL,EAAKJ,CAAM;AAAA;;;;;;;;"}