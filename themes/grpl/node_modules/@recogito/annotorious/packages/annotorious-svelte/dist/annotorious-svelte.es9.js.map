{"version":3,"file":"annotorious-svelte.es9.js","sources":["../../../node_modules/@neodrag/svelte/dist/min/index.js"],"sourcesContent":["var t={dragStart:!0},e=(t,e,n)=>Math.min(Math.max(t,e),n),n=t=>\"string\"==typeof t,r=([t,e],n,r)=>{const o=(t,e)=>0===e?0:Math.ceil(t/e)*e;return[o(n,t),o(r,e)]};var o=(t,e)=>t.some((t=>e.some((e=>t.contains(e)))));function i(t,e){if(void 0===t)return;if(s(t))return t.getBoundingClientRect();if(\"object\"==typeof t){const{top:e=0,left:n=0,right:r=0,bottom:o=0}=t;return{top:e,right:window.innerWidth-r,bottom:window.innerHeight-o,left:n}}if(\"parent\"===t)return e.parentNode.getBoundingClientRect();const n=document.querySelector(t);if(null===n)throw new Error(\"The selector provided for bound doesn't exists in the document.\");return n.getBoundingClientRect()}var a=(t,e,n)=>t.style.setProperty(e,n),s=t=>t instanceof HTMLElement,d=(d,l={})=>{let c,u,{bounds:f,axis:g=\"both\",gpuAcceleration:h=!0,legacyTranslate:p=!0,transform:m,applyUserSelectHack:y=!0,disabled:b=!1,ignoreMultitouch:w=!1,recomputeBounds:v=t,grid:x,position:E,cancel:S,handle:A,defaultClass:C=\"neodrag\",defaultClassDragging:N=\"neodrag-dragging\",defaultClassDragged:D=\"neodrag-dragged\",defaultPosition:M={x:0,y:0},onDragStart:B,onDrag:$,onDragEnd:R}=l,H=!1,L=0,P=0,T=0,X=0,Y=0,q=0,{x:k,y:U}=E?{x:E?.x??0,y:E?.y??0}:M;Q(k,U);let W,j,z,F,G,I=\"\",J=!!E;v={...t,...v};const K=document.body.style,O=d.classList;function Q(t=L,e=P){if(!m){if(p){let n=`${+t}px, ${+e}px`;return a(d,\"transform\",h?`translate3d(${n}, 0)`:`translate(${n})`)}return a(d,\"translate\",`${+t}px ${+e}px ${h?\"1px\":\"\"}`)}const r=m({offsetX:t,offsetY:e,rootNode:d});n(r)&&a(d,\"transform\",r)}const V=(t,e)=>{const n={offsetX:L,offsetY:P,rootNode:d,currentNode:G};d.dispatchEvent(new CustomEvent(t,{detail:n})),e?.(n)};const Z=addEventListener;Z(\"pointerdown\",tt,!1),Z(\"pointerup\",et,!1),Z(\"pointermove\",nt,!1),a(d,\"touch-action\",\"none\");const _=()=>{let t=d.offsetWidth/j.width;return isNaN(t)&&(t=1),t};function tt(t){if(b)return;if(2===t.button)return;if(w&&!t.isPrimary)return;if(v.dragStart&&(W=i(f,d)),n(A)&&n(S)&&A===S)throw new Error(\"`handle` selector can't be same as `cancel` selector\");if(O.add(C),z=function(t,e){if(!t)return[e];if(s(t))return[t];if(Array.isArray(t))return t;const n=e.querySelectorAll(t);if(null===n)throw new Error(\"Selector passed for `handle` option should be child of the element on which the action is applied\");return Array.from(n.values())}(A,d),F=function(t,e){if(!t)return[];if(s(t))return[t];if(Array.isArray(t))return t;const n=e.querySelectorAll(t);if(null===n)throw new Error(\"Selector passed for `cancel` option should be child of the element on which the action is applied\");return Array.from(n.values())}(S,d),c=/(both|x)/.test(g),u=/(both|y)/.test(g),o(F,z))throw new Error(\"Element being dragged can't be a child of the element on which `cancel` is applied\");const e=t.composedPath()[0];if(!z.some((t=>t.contains(e)||t.shadowRoot?.contains(e)))||o(F,[e]))return;G=1===z.length?d:z.find((t=>t.contains(e))),H=!0,j=d.getBoundingClientRect(),y&&(I=K.userSelect,K.userSelect=\"none\"),V(\"neodrag:start\",B);const{clientX:r,clientY:a}=t,l=_();c&&(T=r-k/l),u&&(X=a-U/l),W&&(Y=r-j.left,q=a-j.top)}function et(){H&&(v.dragEnd&&(W=i(f,d)),O.remove(N),O.add(D),y&&(K.userSelect=I),V(\"neodrag:end\",R),c&&(T=L),u&&(X=P),H=!1)}function nt(t){if(!H)return;v.drag&&(W=i(f,d)),O.add(N),t.preventDefault(),j=d.getBoundingClientRect();let n=t.clientX,o=t.clientY;const a=_();if(W){const t={left:W.left+Y,top:W.top+q,right:W.right+Y-j.width,bottom:W.bottom+q-j.height};n=e(n,t.left,t.right),o=e(o,t.top,t.bottom)}if(Array.isArray(x)){let[t,e]=x;if(isNaN(+t)||t<0)throw new Error(\"1st argument of `grid` must be a valid positive number\");if(isNaN(+e)||e<0)throw new Error(\"2nd argument of `grid` must be a valid positive number\");let i=n-T,s=o-X;[i,s]=r([t/a,e/a],i,s),n=T+i,o=X+s}c&&(L=Math.round((n-T)*a)),u&&(P=Math.round((o-X)*a)),k=L,U=P,V(\"neodrag\",$),Q()}return{destroy:()=>{const t=removeEventListener;t(\"pointerdown\",tt,!1),t(\"pointerup\",et,!1),t(\"pointermove\",nt,!1)},update:e=>{g=e.axis||\"both\",b=e.disabled??!1,w=e.ignoreMultitouch??!1,A=e.handle,f=e.bounds,v=e.recomputeBounds??t,S=e.cancel,y=e.applyUserSelectHack??!0,x=e.grid,h=e.gpuAcceleration??!0,p=e.legacyTranslate??!0,m=e.transform;const n=O.contains(D);O.remove(C,D),C=e.defaultClass??\"neodrag\",N=e.defaultClassDragging??\"neodrag-dragging\",D=e.defaultClassDragged??\"neodrag-dragged\",O.add(C),n&&O.add(D),J&&(k=L=e.position?.x??L,U=P=e.position?.y??P,Q())}}};export{d as draggable};"],"names":["t","e","n","r","o","i","s","a","d","l","c","u","f","g","h","p","m","y","b","w","v","x","E","S","A","C","N","D","M","B","$","R","H","L","P","T","X","k","U","Q","W","j","z","F","G","I","J","K","O","V","Z","_a","_b"],"mappings":"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","x_google_ignoreList":[0]}