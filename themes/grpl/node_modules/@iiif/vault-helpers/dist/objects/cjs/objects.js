"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function s(e,i,n){i[f]=i[f]||[],i[f].push(e),Object.defineProperty(i,e,{get(){if(typeof i[o][e]=="undefined")return;const r=i[o][e];return r&&a(n.get(i[o][e]),n)},set(r){i[o][e]!==r&&(this[o][e]=r)}})}const o=Symbol.for("_refs_"),c=Symbol.for("_reactive_"),f=Symbol.for("_defined_");function h(e,i=!1){const n={id:null,[f]:[],[o]:{},[c]:null,is(r){return typeof r=="string"?this.id===r:r.id?r.id===this.id:!1},reactive(){if(!this[c])return this[c]=this.subscribe(()=>this.refresh(),!0),()=>{this.unreactive()}},refresh(){if(this.id){const r=this.unwrap();for(const t of Object.keys(r||{}))this[f].includes(t)?this[o][t]=r[t]:this[t]=r[t]}},unreactive(){this[c]&&(this[c](),this[c]=null)},unwrap(){if(!this.id)throw new Error("Invalid object");return e.get(this.id)},toPresentation3(){return e.toPresentation3(this.unwrap())},toPresentation2(){return e.toPresentation2(this.unwrap())},toJSON(){const r=this;return{...r,items:r.items,annotations:r.annotations,structures:r.structures,seeAlso:r.seeAlso,service:r.service,services:r.services,rendering:r.rendering,partOf:r.partOf,start:r.start,supplementary:r.supplementary,homepage:r.homepage,thumbnail:r.thumbnail,placeholderCanvas:r.placeholderCanvas,accompanyingCanvas:r.accompanyingCanvas,provider:r.provider}},subscribe(r,t=!0){return e.subscribe(()=>this.id?e.get(this.id):null,r,t)}};return s("items",n,e),s("annotations",n,e),s("structures",n,e),s("seeAlso",n,e),s("service",n,e),s("services",n,e),s("rendering",n,e),s("partOf",n,e),s("start",n,e),s("supplementary",n,e),s("homepage",n,e),s("thumbnail",n,e),s("placeholderCanvas",n,e),s("accompanyingCanvas",n,e),s("provider",n,e),s("body",n,e),s("logo",n,e),n}function p(e){return Array.isArray(e)?e.map(i=>p(i)):!e||!e.type?e:{id:e.id,type:e.type}}function a(e,i,n=!1){if(Array.isArray(e))return e.map(u=>a(u,i,n));if(!e||!e.type||!e.id)return e;const r=h(i,n),t=Object.create(r),d=Object.assign(t,e);return n&&d.reactive(),d}function y(e){return{get(i,n=!1){return a(e.get(i),e,n)},async load(i,n){return a(await e.load(i,n),e)},async loadManifest(i,n){return a(await e.loadManifest(i,n),e)},async loadCollection(i,n){return a(await e.loadCollection(i,n),e)},wrapObject(i){return a(e.get(i,{skipSelfReturn:!1}),e)},isWrapped(i){return!!i[f]}}}exports.createObjectsHelper=y;exports.unwrapObject=p;exports.wrapObject=a;
//# sourceMappingURL=objects.js.map
