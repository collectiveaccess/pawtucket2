"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const C={},b={get(s){return s},setMetaValue([s,t,e],n){const o=b.getResourceMeta(s,t),a=o?o[e]:void 0,l=typeof n=="function"?n(a):n;C[s]={...C[s]||{},[t]:{...(C[s]||{})[t]||{},[e]:l}}},getResourceMeta:(s,t)=>{const e=C[s];if(!!e)return t?e[t]:e}};function M(s,t){const e=[];for(const n of t.items)if(n.type==="Canvas"&&(n.id.indexOf("#")!==-1?e.push({id:n.id.split("#")[0],type:"Canvas"}):e.push(n)),n.type==="Range"&&e.push(...M(s,s.get(n))),n.type==="SpecificResource"){const o=typeof n.source=="string"?n.source:n.source.id;e.push({id:o,type:"Canvas"})}return e}function y(s=b){return{getVisibleCanvasesFromCanvasId:(t,e,n=!1)=>m(s,t,e,n),getManifestSequence:(t,e={})=>I(s,t,e)}}function m(s=b,t,e,n=!1){const o=t.behavior||[],a=e?s.get(e):null;if(!a)return[];const l=a.behavior||[],v=n?!1:o.includes("paged"),u=v?!1:o.includes("continuous"),g=v||u?!1:o.includes("individuals"),c=l.includes("facing-pages"),r=l.includes("non-paged");if(c||r||g||n)return[{id:a.id,type:"Canvas"}];const[d,p]=I(s,t);if(u)return d;const i=d.findIndex(f=>f.id===e);if(i===-1)return[];for(const f of p)if(f.includes(i))return f.map(h=>d[h]);return[{id:a.id,type:"Canvas"}]}function I(s=b,t,{disablePaging:e,skipNonPaged:n}={}){const o=t.behavior||[],a=o.includes("paged"),l=a?!1:o.includes("continuous"),v=a||l?!1:o.includes("individuals"),u=t.type==="Manifest"?t.items:M(s,t);if(l)return[u,[u.map((i,f)=>f)]];if(v||!a||e)return[u,u.map((i,f)=>[f])];const g=[];let c=[];const r=()=>{c.length&&(g.push([...c]),c=[])};let d=0,p=!1;for(let i=0;i<u.length;i++){const h=s.get(u[i]).behavior||[];if(h.includes("non-paged")){i===d&&d++,n||(r(),g.push([i]),r());continue}if(i===d||h.includes("facing-pages")){c.length&&(p=!0),r(),g.push([i]),r();continue}if(c.push(i),p){r(),p=!1;continue}c.length>1&&r()}return c.length&&r(),[u,g]}exports.createSequenceHelper=y;exports.getManifestSequence=I;exports.getVisibleCanvasesFromCanvasId=m;
//# sourceMappingURL=sequences.js.map
