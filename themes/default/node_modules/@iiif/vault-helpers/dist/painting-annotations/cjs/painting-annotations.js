"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function b(e){return e.type==="SpecificResource"?[e.source,{selector:e.selector}]:[e,{selector:null}]}function w(e){function p(t){const n=t?typeof t=="string"?e.get(t):t:null;if(!n)return[];const a=e.get(n.items),o=[];for(const s of a)o.push(...e.get(s.items));return o}function g(t,n=[]){const a=Array.isArray(t)?t:p(t),o=[];let s=null;const d=[];for(const f of a){if(f.type!=="Annotation")throw new Error("getPaintables() accept either a canvas or list of annotations");const h=e.get(f.body);for(const y of h){const[u,{selector:A}]=b(y),c=(u.type||"unknown").toLowerCase();if(c==="choice"){const r=e.get(u.items),l=n.length?n.map(i=>r.find(P=>P.id===i)).filter(Boolean):[r[0]];l.length===0&&l.push(r[0]),s={type:"single-choice",items:r.map(i=>({id:i.id,label:i.label,selected:l.indexOf(i)!==-1})),label:y.label},h.push(...l);continue}o.indexOf(c)===-1&&o.push(c),d.push({type:c,resource:u,target:f.target,selector:A})}}return{types:o,items:d,choice:s}}function m(t){const{choice:n}=g(t);return n}return{getAllPaintingAnnotations:p,getPaintables:g,extractChoices:m}}exports.createPaintingAnnotationsHelper=w;exports.parseSpecificResource=b;
//# sourceMappingURL=painting-annotations.js.map
