"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var u=require("@atlas-viewer/iiif-image-api");function b(s,m={}){const r=m.imageServiceLoader||new u.ImageServiceLoader;async function l(g,n,o,c=[],a){if(typeof g=="string")return{best:u.getFixedSizeFromImage(g),fallback:[],log:[]};const t=s.get(g);if(typeof t=="string")return{best:u.getFixedSizeFromImage(t),fallback:[],log:[]};switch(t.type){case"Annotation":{const e=t.body,i=s.get(e[0]);return a&&!i.width&&(i.width=a.width,i.height=a.height),await r.getThumbnailFromResource(i,n,o,c)}case"Canvas":{const e=t;if(e.thumbnail&&e.thumbnail.length){const i=s.get(e.thumbnail[0]),h=await r.getImageCandidates(i,o);h&&h.length&&c.push(...h)}return l(e.items[0],n,o,c,{width:e.width,height:e.height})}case"AnnotationPage":return l(t.items[0],n,o,c,a);case"Choice":return l(t.items[0],n,o,c,a);case"Collection":{const i=t.items[0];return l(i,n,o,c,a)}case"Manifest":{const i=t.items[0];return l(i,n,o,c,a)}case"SpecificResource":case"Image":case"Dataset":case"Sound":case"Text":case"TextualBody":case"Video":return a&&!t.width&&(t.width=a.width,t.height=a.height),r.getThumbnailFromResource(t,n,o,c);case"Service":case"Range":case"AnnotationCollection":case"CanvasReference":case"ContentResource":return{best:void 0,fallback:[],log:[]}}return{best:void 0,fallback:[],log:[]}}return{getBestThumbnailAtSize:l}}exports.createThumbnailHelper=b;
//# sourceMappingURL=thumbnail.js.map
