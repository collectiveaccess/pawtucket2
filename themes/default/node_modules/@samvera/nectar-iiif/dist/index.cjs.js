var lt=Object.create;var C=Object.defineProperty,ut=Object.defineProperties,ct=Object.getOwnPropertyDescriptor,ft=Object.getOwnPropertyDescriptors,pt=Object.getOwnPropertyNames,W=Object.getOwnPropertySymbols,dt=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var j=(t,e,r)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i=(t,e)=>{for(var r in e||(e={}))q.call(e,r)&&j(t,r,e[r]);if(W)for(var r of W(e))gt.call(e,r)&&j(t,r,e[r]);return t},_=(t,e)=>ut(t,ft(e));var yt=(t,e)=>{for(var r in e)C(t,r,{get:e[r],enumerable:!0})},D=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of pt(e))!q.call(t,o)&&o!==r&&C(t,o,{get:()=>e[o],enumerable:!(n=ct(e,o))||n.enumerable});return t};var c=(t,e,r)=>(r=t!=null?lt(dt(t)):{},D(e||!t||!t.__esModule?C(r,"default",{value:t,enumerable:!0}):r,t)),bt=t=>D(C({},"__esModule",{value:!0}),t);var qt={};yt(qt,{Homepage:()=>J,Label:()=>k,Metadata:()=>Z,PartOf:()=>tt,RequiredStatement:()=>et,SeeAlso:()=>rt,Summary:()=>at,Thumbnail:()=>st,Value:()=>R});module.exports=bt(qt);var L=c(require("react"));var G=require("@stitches/react"),{styled:m,css:Gt,keyframes:Kt}=(0,G.createStitches)({prefix:"nectar"});var P=(t,e="none")=>{if(!t)return null;if(typeof t=="string")return[t];if(!t[e]){let r=Object.getOwnPropertyNames(t);if(r.length>0)return t[r[0]]}return!t[e]||!Array.isArray(t[e])?null:t[e]},f=(t,e="none")=>{let r=P(t,e);return Array.isArray(r)?r.join(", "):r};var K=c(require("sanitize-html"));function B(t){return{__html:St(t)}}function s(t,e){let r=Object.keys(t).filter(o=>e.includes(o)?null:o),n=new Object;return r.forEach(o=>{n[o]=t[o]}),n}function St(t){return(0,K.default)(t,{allowedAttributes:{a:["href"],img:["alt","src"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}var At=m("a",{}),ht=t=>{let{children:e,homepage:r}=t,o=s(t,["children","homepage"]);return L.default.createElement(L.default.Fragment,null,r&&r.map(a=>{let l=f(a.label,o.lang);return L.default.createElement(At,i({"aria-label":e?l:void 0,href:a.id,key:a.id},o),e||l)}))},J=ht;var Q=c(require("react"));var vt=m("span",{}),Ct=t=>{let{as:e,label:r}=t,o=s(t,["as","label"]);return Q.default.createElement(vt,i({as:e},o),f(r,o.lang))},k=Ct;var y=c(require("react"));var N=c(require("react"));var U=c(require("react"));var x=c(require("react"));var Nt=m("span",{}),Mt=t=>{let{as:e,markup:r}=t;if(!r)return x.default.createElement(x.default.Fragment,null);let o=s(t,["as","markup"]),a=B(f(r,o.lang));return x.default.createElement(Nt,_(i({as:e},o),{dangerouslySetInnerHTML:a}))},E=Mt;var It=({as:t="dd",lang:e,value:r})=>U.default.createElement(E,{markup:r,as:t,lang:e}),R=It;var g=c(require("react"));var Lt=m("span",{}),kt=({as:t="dd",customValueContent:e,lang:r,value:n})=>{var a;let o=(a=P(n,r))==null?void 0:a.map(l=>(0,g.cloneElement)(e,{value:l}));return g.default.createElement(Lt,{as:t,lang:r},o==null?void 0:o.map((l,b)=>[b>0&&", ",g.default.createElement(g.Fragment,{key:b},l)]))},X=kt;var xt=t=>{let{item:e,lang:r,customValueContent:n}=t,{label:o,value:a}=e;return N.default.createElement("div",{role:"group"},N.default.createElement(k,{as:"dt",label:o,lang:r}),n?N.default.createElement(X,{as:"dd",customValueContent:n,value:a,lang:r}):N.default.createElement(R,{as:"dd",value:a,lang:r}))},V=xt;function Y(t,e){let r=e.filter(n=>{let{matchingLabel:o}=n,a=Object.keys(n.matchingLabel)[0],l=f(o,a);if(f(t,a)===l)return!0}).map(n=>n.Content);if(!!Array.isArray(r))return r[0]}var Et=m("dl",{}),Rt=t=>{let{as:e,customValueContent:r,metadata:n}=t;if(!Array.isArray(n))return y.default.createElement(y.default.Fragment,null);let a=s(t,["as","customValueContent","metadata"]);return y.default.createElement(y.default.Fragment,null,n.length>0&&y.default.createElement(Et,i({as:e},a),n.map((l,b)=>{let A=r?Y(l.label,r):void 0;return y.default.createElement(V,{customValueContent:A,item:l,key:b,lang:a==null?void 0:a.lang})})))},Z=Rt;var T=c(require("react"));var Vt=m("li",{}),Tt=m("ul",{}),Ft=t=>{let{as:e,partOf:r}=t,o=s(t,["as","partOf"]);return T.default.createElement(Tt,{as:e},r&&r.map(a=>{let l=a.label?f(a.label,o.lang):void 0;return T.default.createElement(Vt,{key:a.id},T.default.createElement("a",i({href:a.id},o),l||a.id))}))},tt=Ft;var M=c(require("react"));var Ot=m("dl",{}),Ht=t=>{let{as:e,requiredStatement:r}=t;if(!r)return M.default.createElement(M.default.Fragment,null);let o=s(t,["as","requiredStatement"]);return M.default.createElement(Ot,i({as:e},o),M.default.createElement(V,{item:r,lang:o.lang}))},et=Ht;var F=c(require("react"));var wt=m("li",{}),zt=m("ul",{}),Pt=t=>{let{as:e,seeAlso:r}=t,o=s(t,["as","seeAlso"]);return F.default.createElement(zt,{as:e},r&&r.map(a=>{let l=f(a.label,o.lang);return F.default.createElement(wt,{key:a.id},F.default.createElement("a",i({href:a.id},o),l||a.id))}))},rt=Pt;var ot=c(require("react"));var $t=t=>{let{as:e,summary:r}=t,o=s(t,["as","summary"]);return ot.default.createElement(E,i({as:e,markup:r},o))},at=$t;var O=c(require("react"));var p=c(require("react"));var S=c(require("hls.js"));var nt=(t,e="200,",r="full")=>{Array.isArray(t)&&(t=t[0]);let{id:n,service:o}=t,a;if(!o)return n;if(Array.isArray(t.service)&&t.service.length>0&&(a=o[0]),a){if(a["@id"])return`${a["@id"]}/${r}/${e}/0/default.jpg`;if(a.id)return`${a.id}/${r}/${e}/0/default.jpg`}};var it=m("img",{objectFit:"cover"}),Wt=t=>{let e=(0,p.useRef)(null),{contentResource:r,altAsLabel:n,region:o="full"}=t,a;n&&(a=f(n));let b=s(t,["contentResource","altAsLabel"]),{type:A,id:d,width:H=200,height:w=200,format:_t,duration:I}=r;(0,p.useEffect)(()=>{if(!d&&!e.current||["Image"].includes(A)||!d.includes("m3u8"))return;let u=new S.default;return e.current&&(u.attachMedia(e.current),u.on(S.default.Events.MEDIA_ATTACHED,function(){u.loadSource(d)})),u.on(S.default.Events.ERROR,function(h,v){if(v.fatal)switch(v.type){case S.default.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${h} network error encountered, try to recover`),u.startLoad();break;case S.default.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${h} media error encountered, try to recover`),u.recoverMediaError();break;default:u.destroy();break}}),()=>{u&&(u.detachMedia(),u.destroy())}},[]),(0,p.useEffect)(()=>z(),[]);let z=()=>{if(!e.current)return;let u=0,h=30;if(I&&(h=I),!d.split("#t=")&&I&&(u=I*.1),d.split("#t=").pop()){let $=d.split("#t=").pop();$&&(u=parseInt($.split(",")[0]))}let v=e.current;v.autoplay=!0,v.currentTime=u,setTimeout(()=>z(),h*1e3)};switch(A){case"Image":let u=nt(r,`${H},${w}`,o);return p.default.createElement(it,i({as:"img",alt:a,css:{width:H,height:w},key:d,src:u},b));case"Video":return p.default.createElement(it,{as:"video",css:{width:H,height:w},disablePictureInPicture:!0,key:d,loop:!0,muted:!0,onPause:z,ref:e,src:d});default:return console.warn(`Resource type: ${A} is not valid or not yet supported in Nectar.`),p.default.createElement(p.default.Fragment,null)}},mt=Wt;var jt=t=>{let{thumbnail:e,region:r}=t,o=s(t,["thumbnail"]);return O.default.createElement(O.default.Fragment,null,e&&e.map(a=>O.default.createElement(mt,i({contentResource:a,key:a.id,region:r},o))))},st=jt;
